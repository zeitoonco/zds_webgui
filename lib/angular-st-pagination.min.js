/*!
 * angular-st-pagination v0.4.0
 * source: git@github.com:tilmanpotthof/angular-st-pagination.git
 * license: MIT (https://raw.githubusercontent.com/tilmanpotthof/angular-st-pagination/master/LICENCE)
 */

!function(a){function b(a){this._collection=a,this._limit=b.DEFAULT_LIMIT,this._page=0,this._cachedIndices={}}function c(a){this.array=c.range(a),this.lastIndex=a-1}a.module("stPagination",[]),b.isNumberOrDefault=function(b,c){return a.isNumber(b)?b:c},b.DEFAULT_LIMIT=10,b.DEFAULT_EDGE_RANGE=3,b.DEFAULT_MID_RANGE=3,a.extend(b.prototype,{setCollection:function(a){this._collection=a,this.checkPageLimits()},paginatedCollection:function(){return this._collection.slice(this.start(),this.stop())},collection:function(){return this._collection},start:function(){return this.offset()},stop:function(){var a=this.length(),b=this.offset()+this.getLimit();return a>b?b:a},length:function(){return this._collection.length},setLimit:function(a){this._limit=a},totalPages:function(){return Math.ceil(this._collection.length/this.getLimit())||1},offset:function(){return this._page*this._limit},page:function(){return this._page},next:function(){this._page+=1,this.checkPageLimits()},prev:function(){this._page-=1,this.checkPageLimits()},getLimit:function(){return this._limit},setPage:function(b){if(a.isArray(b)){var c=Math.floor((b.length-1)/2);this._page=b[c]}else this._page=b;this.checkPageLimits()},checkPageLimits:function(){this._page<0?this._page=0:this._page>this.lastPage()&&(this._page=this.lastPage())},onFirstPage:function(){return 0===this.page()},onLastPage:function(){return this.page()===this.lastPage()},onPage:function(a){return this.page()===a},lastPage:function(){return this.totalPages()-1},reducedIndices:function(a,d){a=b.isNumberOrDefault(a,b.DEFAULT_MID_RANGE),d=b.isNumberOrDefault(d,b.DEFAULT_EDGE_RANGE);var e=this.indexCacheKey(a,d);if(this._cachedIndices[e])return this._cachedIndices[e];var f=new c(this.totalPages());f.foldForIndex(this.page(),a,d);var g=f.build();return this._cachedIndices[e]=g,g},indexCacheKey:function(a,b){return this.page()+"-"+this.getLimit()+"-"+this.length()+"-"+a+"-"+b},displayPage:function(){return this.page()+1},displayStart:function(){return this.start()+1}}),c.range=function(a){return Array.apply(null,new Array(a)).map(function(a,b){return b})},a.extend(c.prototype,{build:function(){return this.array},foldRange:function(b,c){var d=this.array,e=this.array=[];return d.forEach(function(d){if(b>d||d>c||a.isArray(d))e.push(d);else{var f=e[e.length-1];a.isArray(f)?f.push(d):e.push([d])}}),this},foldForIndex:function(a,b,c){var d=0+c,e=a-b,f=a+b,g=this.lastIndex-c;return c+b>=a?(d=c+2*b,this.foldRange(d,g)):a>=this.lastIndex-(c+b)?(g=this.lastIndex-(c+2*b),this.foldRange(d,g)):this.foldRange(d,e).foldRange(f,g)}}),a.module("stPagination").provider("stPagination",function(){"use strict";var a={};this.setDefaultLimit=function(a){b.DEFAULT_LIMIT=a},this.setDefaultEdgeRange=function(a){b.DEFAULT_EDGE_RANGE=a},this.setDefaultMidRange=function(a){b.DEFAULT_MID_RANGE=a},this.setDefaultCssConfig=function(b){a=b},this.$get=function(){return{hasPagination:function(a){return a&&a.pagination instanceof b},Pagination:b,range:c.range,indexRangeBuilder:function(a){return new c(a)},cssConfig:function(){return a}}}}),a.module("stPagination").filter("stPagination",["stPagination",function(a){"use strict";return function(b,c){var d;if(b){d=c||b,a.hasPagination(d)||(d.pagination=new a.Pagination(b));var e=d.pagination;return e.setCollection(b),e.paginatedCollection()}}}]),a.module("stPagination").directive("stPaginationLimit",["stPagination",function(a){"use strict";var b=[10,20,50];return{restrict:"E",replace:!0,template:'<select ng-options="limit for limit in limits()" ng-model="pagination._limit"></select>',scope:{collection:"=",getLimits:"&limits"},link:function(c){c.limits=function(){return c.getLimits()||b},c.$watch("collection",function(b){a.hasPagination(b)?c.pagination=b.pagination:delete c.pagination})}}}]),a.module("stPagination").directive("stPagination",["stPagination","$parse",function(b,c){"use strict";function d(b){return a.isNumber(b)?b+1:a.isArray(b)?"...":b}var e=["-webkit-touch-callout","-webkit-user-select","-moz-user-select","-ms-user-select","user-select"],f='<ul><li ng-class="{%DISABLED_CLASS%: pagination.onFirstPage()}"><a ng-click="pagination.prev()">&laquo;</a></li><li ng-class="{%SELECTED_CLASS%: pagination.onPage(index)}" ng-repeat="index in pagination.reducedIndices(midRange, edgeRange)"><a ng-click="pagination.setPage(index)">{{ displayPaginationIndex(index) }}</a></li><li ng-class="{%DISABLED_CLASS%: pagination.onLastPage()}"><a ng-click="pagination.next()">&raquo;</a></li></ul>',g={extendDefaults:function(c){var d={divWrapped:!1,selectedClass:"active",disabledClass:"disabled"},e=b.cssConfig();a.isObject(e)||(e=this.getCssConfigByKey(e));var f=a.extend(d,e);return a.extend(f,c)},cssConfigsByKey:{list:{},divWrappedList:{divWrapped:!0},bootstrap3:{},bootstrap2:{divWrapped:!0},zurbFoundation:{selectedClass:"current",disabledClass:"unavailable"}},getCssConfigByKey:function(a){var b=this.cssConfigsByKey[a];if(void 0!==b)return b;var c='Given css-config attribute "'+a+'" is not in allowed values '+h;throw new Error(c)},parseCssConfig:function(b){var d=c(b)({});return a.isObject(d)?d:(b=b||i,d=this.getCssConfigByKey(b))}},h='"'+Object.keys(g.cssConfigsByKey).join('", "')+'"',i="list";return{restrict:"E",replace:!0,scope:{collection:"=",edgeRange:"=",midRange:"="},template:f,compile:function(b,c){var d=g.parseCssConfig(c.cssConfig);d=g.extendDefaults(d),d.divWrapped?b.wrap('<div class="pagination"></div>'):b.addClass("pagination"),a.forEach(b.find("li"),function(b){var c=a.element(b),e=c.attr("ng-class");e=e.replace("%DISABLED_CLASS%",d.disabledClass),e=e.replace("%SELECTED_CLASS%",d.selectedClass),c.attr("ng-class",e)})},controller:["$scope","$element","$attrs",function(c,f,g){a.forEach(e,function(a){f.css(a,"none")});var h=g.collection;c.displayPaginationIndex=d,c.$watch("collection",function(d){if(a.isArray(d)){if(!b.hasPagination(d)){var e='Collection "'+h+'" in the pagination directive is not used with a neccessary pagination filter.';throw new Error(e)}c.pagination=d.pagination}})}]}}]),a.module("stPagination").filter("stPageInfo",["stPagination",function(a){"use strict";var b={total:"length",totalPages:"totalPages",currentPage:"displayPage",startIndex:"displayStart",stopIndex:"stop"};return function(c,d){if(a.hasPagination(c)&&d){var e=b[d];if(!e)throw new Error('No display property "'+d+'" defined for the stPageInfo filter');return c.pagination[e]()}return c}}])}(angular);
//# sourceMappingURL=angular-st-pagination.min.js.map